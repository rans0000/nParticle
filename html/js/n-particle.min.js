!function(a){"use strict";function b(a,b,c,d){this.config=d,this.initialize(a,b,c,d),this.renderParticle()}function c(a,b,c,d,e){this.config=e,this.initialize(a,b,c,d)}function d(a,b){var c=this;c.particleList=[],c.connectorLinesList=[],c.config=b,c.initialize(a,c.config),setInterval(function(){c.animateParticles()},this.config.animInterval)}b.prototype.initialize=function(a,b,c){this.container=a,this.resetParticle(b,c)},b.prototype.resetParticle=function(a,b){this.radius=Math.random()*this.config.maxRadius+this.config.minRadius,this.color=this.config.particleColor,this.opacity=.7,this.horizontalSpeed=Math.random()*this.config.maxHorizontalSpeed*(Math.round(Math.random())?-1:1),this.VerticalSpeed=Math.random()*this.config.maxVerticalSpeed*(Math.round(Math.random())?-1:1),this.posX=a||Math.random()*this.config.elementWidth,this.posY=b||Math.random()*this.config.elementHeight},b.prototype.renderParticle=function(){this.container.select(".particleContainer").append("circle").attr({cx:this.posX,cy:this.posY,r:this.radius}).style({fill:this.color,stroke:"none",opacity:this.opacity})},b.prototype.moveParticle=function(a,b){var c=a||this.posX+this.horizontalSpeed,d=b||this.posY+this.VerticalSpeed;(0>c||c>this.config.elementWidth)&&(c=Math.random()*this.config.elementWidth),(0>d||d>this.config.elementHeight)&&(d=Math.random()*this.config.elementHeight),this.posX=c,this.posY=d},c.prototype.initialize=function(a,b,c,d){this.color=this.config.particleColor,this.renderConnectorLines(a,b,c,d)},c.prototype.renderConnectorLines=function(a,b,c,d){this.x1=a,this.y1=b,this.x2=c,this.y2=d;var e=Math.sqrt((c-a)*(c-a)+(d-b)*(d-b));e=this.config.maxThreshold-e>this.config.maxThreshold-this.config.minThreshold?this.config.minThreshold:e,this.opacity=1-e/this.config.maxThreshold},d.prototype.initialize=function(b,c){var d=this;d.element=d3.select(b);var e=d.element.node().getBoundingClientRect(),f=e.width,g=e.height;d.config={element:d3.select(b).append("svg"),elementWidth:f||500,elementHeight:g||500,maxRadius:4,minRadius:1,maxHorizontalSpeed:2,maxVerticalSpeed:4,maxParticleCount:20,particleColor:"#fff",minThreshold:10,maxThreshold:100,backgroundColor:"#398bdd",animInterval:100};for(var h in c)c.hasOwnProperty(h)&&(d.config[h]=c[h]);d.svg=d.config.element.attr({width:"100%",height:"100%"}).style({background:d.config.backgroundColor}),d.svg.append("g").attr({"class":"particleContainer",transform:"translate(0, 0)"}),d.svg.append("g").attr("class","lineContainer"),a.onresize=function(){d.onResize()}},d.prototype.onResize=function(){var a=this.element.node().getBoundingClientRect();this.config.elementWidth=a.width,this.config.elementHeight=a.height},d.prototype.animateParticles=function(){if(this.particleList.length<this.config.maxParticleCount){var a=Math.random()*this.config.elementWidth,d=Math.random()*this.config.elementHeight,e=new b(this.svg,a,d,this.config);this.particleList.push(e)}var f,g,h=this.particleList.length;for(this.connectorLinesList=[],f=0;h>f;++f)for(this.particleList[f].moveParticle(),g=0;h>g;++g)if(!(f===g&&h/2>f)){var i=this.particleList[f].posX,j=this.particleList[f].posY,k=this.particleList[g].posX,l=this.particleList[g].posY,m=Math.sqrt((k-i)*(k-i)+(l-j)*(l-j));if(m<this.config.maxThreshold){var n=new c(i,j,k,l,this.config);this.connectorLinesList.push(n)}}var o=this.svg.select(".particleContainer").selectAll("circle").data(this.particleList);o.enter().append("circle"),o.exit().remove("circle"),this.svg.select(".particleContainer").selectAll("circle").attr({cx:function(a){return a.posX},cy:function(a){return a.posY},r:function(a){return a.radius}}).style({fill:function(a){return a.color},stroke:"none",opacity:function(a){return a.opacity}});var p=this.svg.select(".lineContainer").selectAll("line").data(this.connectorLinesList);p.enter().append("line"),p.exit().remove("line"),this.svg.select(".lineContainer").selectAll("line").attr({x1:function(a){return a.x1},y1:function(a){return a.y1},x2:function(a){return a.x2},y2:function(a){return a.y2},stroke:function(a){return a.color}}).style({opacity:function(a){return a.opacity>.6?.6:a.opacity}})},a.nParticle=d}(window,d3);
!function(a){"use strict";function b(a,b,c,d){this.config=d,this.initialize(a,b,c,d),this.renderParticle()}function c(a,b,c,d,e){this.config=e,this.initialize(a,b,c,d)}function d(a,b){var c=this;c.particleList=[],c.connectorLinesList=[],c.config=b,c.initialize(a,c.config),setInterval(function(){c.animateParticles()},this.config.animInterval)}b.prototype.initialize=function(a,b,c){this.container=a,this.resetParticle(b,c)},b.prototype.resetParticle=function(a,b){var c=this.config;this.radius=Math.random()*c.maxRadius+c.minRadius,this.color=c.particleColor,this.opacity=.7,this.horizontalSpeed=Math.random()*c.maxHorizontalSpeed*(Math.round(Math.random())?-1:1),this.VerticalSpeed=Math.random()*c.maxVerticalSpeed*(Math.round(Math.random())?-1:1),this.posX=a||Math.random()*c.elementWidth,this.posY=b||Math.random()*c.elementHeight},b.prototype.renderParticle=function(){this.container.select(".particleContainer").append("circle").attr({cx:this.posX,cy:this.posY,r:this.radius}).style({fill:this.color,stroke:"none",opacity:this.opacity})},b.prototype.moveParticle=function(a,b){var c=this.config,d=a||this.posX+this.horizontalSpeed,e=b||this.posY+this.VerticalSpeed;(0>d||d>c.elementWidth)&&(d=Math.random()*c.elementWidth),(0>e||e>c.elementHeight)&&(e=Math.random()*c.elementHeight),this.posX=d,this.posY=e},c.prototype.initialize=function(a,b,c,d){this.color=this.config.particleColor,this.renderConnectorLines(a,b,c,d)},c.prototype.renderConnectorLines=function(a,b,c,d){this.x1=a,this.y1=b,this.x2=c,this.y2=d;var e=Math.sqrt((c-a)*(c-a)+(d-b)*(d-b));e=this.config.maxThreshold-e>this.config.maxThreshold-this.config.minThreshold?this.config.minThreshold:e,this.opacity=1-e/this.config.maxThreshold},d.prototype.initialize=function(b,c){var d=this;d.element=d3.select(b);var e=d.element.node().getBoundingClientRect(),f=e.width,g=e.height;d.config={element:d3.select(b).append("svg"),elementWidth:f||500,elementHeight:g||500,maxRadius:4,minRadius:1,maxHorizontalSpeed:2,maxVerticalSpeed:4,maxParticleCount:20,particleColor:"#fff",minThreshold:10,maxThreshold:100,backgroundColor:"#398bdd",animInterval:100};for(var h in c)c.hasOwnProperty(h)&&(d.config[h]=c[h]);d.svg=d.config.element.attr({width:"100%",height:"100%"}).style({background:d.config.backgroundColor}),d.svg.append("g").attr({"class":"particleContainer",transform:"translate(0, 0)"}),d.svg.append("g").attr("class","lineContainer"),a.onresize=function(){d.onResize()}},d.prototype.onResize=function(){var a=this.config,b=this.element.node().getBoundingClientRect();a.elementWidth=b.width,a.elementHeight=b.height},d.prototype.animateParticles=function(){var a=this.config;if(this.particleList.length<a.maxParticleCount){var d=Math.random()*a.elementWidth,e=Math.random()*a.elementHeight,f=new b(this.svg,d,e,a);this.particleList.push(f)}var g,h,i=this.particleList.length;for(this.connectorLinesList=[],g=0;i>g;++g)for(this.particleList[g].moveParticle(),h=0;i>h;++h)if(!(g===h&&i/2>g)){var j=this.particleList[g].posX,k=this.particleList[g].posY,l=this.particleList[h].posX,m=this.particleList[h].posY,n=Math.sqrt((l-j)*(l-j)+(m-k)*(m-k));if(n<a.maxThreshold){var o=new c(j,k,l,m,a);this.connectorLinesList.push(o)}}var p=this.svg.select(".particleContainer").selectAll("circle").data(this.particleList);p.enter().append("circle"),p.exit().remove("circle"),this.svg.select(".particleContainer").selectAll("circle").attr({cx:function(a){return a.posX},cy:function(a){return a.posY},r:function(a){return a.radius}}).style({fill:function(a){return a.color},stroke:"none",opacity:function(a){return a.opacity}});var q=this.svg.select(".lineContainer").selectAll("line").data(this.connectorLinesList);q.enter().append("line"),q.exit().remove("line"),this.svg.select(".lineContainer").selectAll("line").attr({x1:function(a){return a.x1},y1:function(a){return a.y1},x2:function(a){return a.x2},y2:function(a){return a.y2},stroke:function(a){return a.color}}).style({opacity:function(a){return a.opacity>.6?.6:a.opacity}})},a.nParticle=d}(window,d3);